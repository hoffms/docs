<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Sherry RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Sherry Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Sherry" href="/docs/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Technical Reference | Sherry</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hoffms.github.io/docs/img/twitter_card_bg.jpg"><meta data-rh="true" name="twitter:image" content="https://hoffms.github.io/docs/img/twitter_card_bg.jpg"><meta data-rh="true" property="og:url" content="https://hoffms.github.io/docs/universal-router-legacy/technical-reference"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Technical Reference | Sherry"><meta data-rh="true" name="description" content="Functions"><meta data-rh="true" property="og:description" content="Functions"><link data-rh="true" rel="icon" href="/docs/img/sherry-favicon.png"><link data-rh="true" rel="canonical" href="https://hoffms.github.io/docs/universal-router-legacy/technical-reference"><link data-rh="true" rel="alternate" href="https://hoffms.github.io/docs/universal-router-legacy/technical-reference" hreflang="en"><link data-rh="true" rel="alternate" href="https://hoffms.github.io/docs/universal-router-legacy/technical-reference" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S0IDD0YGLZ-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/docs/assets/css/styles.77903f65.css">
<link rel="preload" href="/docs/assets/js/runtime~main.d2031de2.js" as="script">
<link rel="preload" href="/docs/assets/js/main.f68b392a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/sherry_black_logo.svg" alt="Sherry Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/img/sherry_white_logo.svg" alt="Sherry Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link V3_active V3" href="/docs/concepts/overview">Concepts</a><a class="navbar__item navbar__link V3_active V3" href="/docs/contracts/v4/overview">Contracts</a><a class="navbar__item navbar__link V3_active V3" href="/docs/sdk/trigger-sdk/overview">SDKs</a><a class="navbar__item navbar__link V3_active V3" href="/docs/api/overview">APIs</a></div><div class="navbar__items navbar__items--right"><a href="https://sherry.social/minithon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link persistent V3">Minithon</a><a href="https://sherry.social/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link persistent V3">Sherry Labs</a><a href="https://github.com/sherrylabs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link persistent V3">GitHub</a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently dark mode)" checked=""></div><div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/universal-router-legacy/overview">Universal Router (Legacy)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/universal-router-legacy/overview">Overview</a></li></div><div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/universal-router-legacy/technical-reference">Technical Reference</a></li></div></ul></li></div></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_J6XI" href="/docs/">Home</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_J6XI">Universal Router (Legacy)</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_J6XI" href="/docs/universal-router-legacy/technical-reference">Technical Reference</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Technical Reference</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><p>Transactions to the <code>UniversalRouter</code> all go through the <code>UniversalRouter.execute</code> functions:</p><ul><li><code>execute(bytes calldata commands, bytes[] calldata inputs, uint256 deadline)</code></li><li><code>execute(bytes calldata commands, bytes[] calldata inputs)</code></li></ul><p>The first of these functions adds the functionality to allow transactions to have a transaction deadline. If the <code>block.timestamp</code> is after the <code>deadline</code> provided the transaction will revert. After that check, the 2 functions otherwise execute identically.</p><p>The <code>execute</code> functions work like a simplified VM - they take in a list of commands, and a list of inputs for the commands and execute them in the order specified.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="command-structure">Command Structure<a class="hash-link" href="#command-structure" title="Direct link to heading">​</a></h2><p>The first parameter for the function (<code>bytes calldata commands</code>) is a list of commands for the contract to execute, in the order they should be executed. Each command is encoded in 1 byte, containing the following split of 8 bits:</p><table><thead><tr><th align="left">0</th><th align="left">1 2</th><th align="left">3 4 5 6 7</th></tr></thead><tbody><tr><td align="left">f</td><td align="left">r</td><td align="left">command</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="f"><code>f</code><a class="hash-link" href="#f" title="Direct link to heading">​</a></h3><p>A single bit flag, that signals whether or not the command should be allowed to revert without the whole transaction failing.</p><ul><li>If <code>f</code> is <code>0</code> aka <code>false</code> and the command reverts, then the entire transaction will revert and none of the commands will be executed.</li><li>If <code>f</code> is <code>1</code> aka <code>true</code> and the command reverts, then the transaction will continue, allowing us to achieve partial fills. If using this flag, be careful to include further commands that will remove any funds that could be left unused in the <code>UniversalRouter</code> contract.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="r"><code>r</code><a class="hash-link" href="#r" title="Direct link to heading">​</a></h3><p>2 unused bytes, reserved for future use. Leaving these 2 bits as <code>0</code> will save gas, but any value passed into the contract will be ignored. Later versions of the <code>UniversalRouter</code> will likely expand the 5 bits used for <code>command</code> to use at least 1 of these bits.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="command"><code>command</code><a class="hash-link" href="#command" title="Direct link to heading">​</a></h3><p>A 5 bit unique identifier for the command that should be carried out. The values of these commands can be found within <a href="https://github.com/Uniswap/universal-router/blob/main/contracts/libraries/Commands.sol" target="_blank" rel="noopener noreferrer">Commands.sol</a>, or can be viewed in the table below.</p><p>The command types that are not defined do not have an assigned command at this moment in time. Providing one of these identifiers will cause the transaction to revert with <code>InvalidCommandType</code>.</p><p>A complete list of commands can be found in the table below:</p><table><thead><tr><th align="left">Command</th><th align="left">Value</th></tr></thead><tbody><tr><td align="left"><code>0x00</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#v3_swap_exact_in"><code>V3_SWAP_EXACT_IN</code></a></td></tr><tr><td align="left"><code>0x01</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#v3_swap_exact_out"><code>V3_SWAP_EXACT_OUT</code></a></td></tr><tr><td align="left"><code>0x02</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#permit2_transfer_from"><code>PERMIT2_TRANSFER_FROM</code></a></td></tr><tr><td align="left"><code>0x03</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#permit2_permit_batch"><code>PERMIT2_PERMIT_BATCH</code></a></td></tr><tr><td align="left"><code>0x04</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#sweep"><code>SWEEP</code></a></td></tr><tr><td align="left"><code>0x05</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#transfer"><code>TRANSFER</code></a></td></tr><tr><td align="left"><code>0x06</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#pay_portion"><code>PAY_PORTION</code></a></td></tr><tr><td align="left"><code>0x07</code></td><td align="left"></td></tr><tr><td align="left"><code>0x08</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#v2_swap_exact_in"><code>V2_SWAP_EXACT_IN</code></a></td></tr><tr><td align="left"><code>0x09</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#v2_swap_exact_out"><code>V2_SWAP_EXACT_OUT</code></a></td></tr><tr><td align="left"><code>0x0a</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#permit2_permit"><code>PERMIT2_PERMIT</code></a></td></tr><tr><td align="left"><code>0x0b</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#wrap_eth"><code>WRAP_ETH</code></a></td></tr><tr><td align="left"><code>0x0c</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#unwrap_weth"><code>UNWRAP_WETH</code></a></td></tr><tr><td align="left"><code>0x0d</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#permit2_transfer_from_batch"><code>PERMIT2_TRANSFER_FROM_BATCH</code></a></td></tr><tr><td align="left"><code>0x0e</code></td><td align="left"></td></tr><tr><td align="left"><code>0x0f</code></td><td align="left"></td></tr><tr><td align="left"><code>0x10</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#seaport"><code>SEAPORT</code></a></td></tr><tr><td align="left"><code>0x11</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#looks_rare_721"><code>LOOKS_RARE_721</code></a></td></tr><tr><td align="left"><code>0x12</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#nftx"><code>NFTX</code></a></td></tr><tr><td align="left"><code>0x13</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#cryptopunks"><code>CRYPTOPUNKS</code></a></td></tr><tr><td align="left"><code>0x14</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#looks_rare_1155"><code>LOOKS_RARE_1155</code></a></td></tr><tr><td align="left"><code>0x15</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#owner_check_721"><code>OWNER_CHECK_721</code></a></td></tr><tr><td align="left"><code>0x16</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#owner_check_1155"><code>OWNER_CHECK_1155</code></a></td></tr><tr><td align="left"><code>0x17</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#sweep_erc721"><code>SWEEP_ERC721</code></a></td></tr><tr><td align="left"><code>0x18</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#x2y2_721"><code>X2Y2_721</code></a></td></tr><tr><td align="left"><code>0x19</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#sudoswap"><code>SUDOSWAP</code></a></td></tr><tr><td align="left"><code>0x1a</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#nft20"><code>NFT20</code></a></td></tr><tr><td align="left"><code>0x1b</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#x2y2_1155"><code>X2Y2_1155</code></a></td></tr><tr><td align="left"><code>0x1c</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#foundation"><code>FOUNDATION</code></a></td></tr><tr><td align="left"><code>0x1d</code></td><td align="left"><a href="/docs/universal-router-legacy/technical-reference#sweep_erc1155"><code>SWEEP_ERC1155</code></a></td></tr><tr><td align="left"><code>0x1e</code></td><td align="left"></td></tr><tr><td align="left"><code>0x1f</code></td><td align="left"></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="command-inputs">Command Inputs<a class="hash-link" href="#command-inputs" title="Direct link to heading">​</a></h2><p>The second parameter for the function is an array of bytes strings. Each element in the array is the abi-encoded input that will be used for the respective command.</p><p><code>commands[i]</code> is the command that will use <code>inputs[i]</code> as its encoded input parameters.</p><p>The router uses the command type to know how to decode the encoded input parameters - depending on the command chosen, the required inputs is different.</p><p>The input parameters required for each command are outlined below:</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="v3_swap_exact_in"><code>V3_SWAP_EXACT_IN</code><a class="hash-link" href="#v3_swap_exact_in" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the output of the trade</li><li><code>uint256</code> The amount of input tokens for the trade</li><li><code>uint256</code> The minimum amount of output tokens the user wants</li><li><code>bytes</code> The UniswapV3 encoded path to trade along</li><li><code>bool</code> A flag for whether the input tokens should come from the <code>msg.sender</code> (through Permit2) or whether the funds are already in the <code>UniversalRouter</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="v3_swap_exact_out"><code>V3_SWAP_EXACT_OUT</code><a class="hash-link" href="#v3_swap_exact_out" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the output of the trade</li><li><code>uint256</code> The amount of output tokens to receive</li><li><code>uint256</code> The maximum number of input tokens that should be spent</li><li><code>bytes</code> The UniswapV3 encoded path to trade along</li><li><code>bool</code> A flag for whether the input tokens should come from the <code>msg.sender</code> (through Permit2) or whether the funds are already in the <code>UniversalRouter</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="permit2_transfer_from"><code>PERMIT2_TRANSFER_FROM</code><a class="hash-link" href="#permit2_transfer_from" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The token to fetch from Permit2</li><li><code>address</code> The recipient of the tokens fetched</li><li><code>uint256</code> The amount of token to fetch</li></ul><p>The individual that the tokens are fetched from is always the <code>msg.sender</code> of the transaction</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="permit2_permit_batch"><code>PERMIT2_PERMIT_BATCH</code><a class="hash-link" href="#permit2_permit_batch" title="Direct link to heading">​</a></h3><ul><li><code>IAllowanceTransfer.PermitBatch</code> A <code>PermitBatch</code> struct outlining all of the Permit2 permits to execute.</li><li><code>bytes</code> The signature to provide to Permit2</li></ul><p>The individual that signed the permits must be the <code>msg.sender</code> of the transaction</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sweep"><code>SWEEP</code><a class="hash-link" href="#sweep" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The ERC20 token to sweep (or Constants.ETH for ETH)</li><li><code>address</code> The recipient of the sweep</li><li><code>uint256</code> The minimum required tokens to receive from the sweep</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="transfer"><code>TRANSFER</code><a class="hash-link" href="#transfer" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The ERC20 token to transfer (or Constants.ETH for ETH)</li><li><code>address</code> The recipient of the transfer</li><li><code>uint256</code> The amount to transfer</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="pay_portion"><code>PAY_PORTION</code><a class="hash-link" href="#pay_portion" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The ERC20 token to transfer (or Constants.ETH for ETH)</li><li><code>address</code> The recipient of the transfer</li><li><code>uint256</code> In basis points, the percentage of the contract’s balance to transfer</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="v2_swap_exact_in"><code>V2_SWAP_EXACT_IN</code><a class="hash-link" href="#v2_swap_exact_in" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the output of the trade</li><li><code>uint256</code> The amount of input tokens for the trade</li><li><code>uint256</code> The minimum amount of output tokens the user wants</li><li><code>address[]</code> The UniswapV2 token path to trade along</li><li><code>bool</code> A flag for whether the input tokens should come from the <code>msg.sender</code> (through Permit2) or whether the funds are already in the <code>UniversalRouter</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="v2_swap_exact_out"><code>V2_SWAP_EXACT_OUT</code><a class="hash-link" href="#v2_swap_exact_out" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the output of the trade</li><li><code>uint256</code> The amount of output tokens to receive</li><li><code>uint256</code> The maximum number of input tokens that should be spent</li><li><code>address[]</code> The UniswapV2 token path to trade along</li><li><code>bool</code> A flag for whether the input tokens should come from the <code>msg.sender</code> (through Permit2) or whether the funds are already in the <code>UniversalRouter</code></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="permit2_permit"><code>PERMIT2_PERMIT</code><a class="hash-link" href="#permit2_permit" title="Direct link to heading">​</a></h3><ul><li><code>IAllowanceTransfer.PermitSingle</code> A <code>PermitSingle</code> struct outlining the Permit2 permit to execute</li><li><code>bytes</code> The signature to provide to Permit2</li></ul><p>The individual that signed the permit must be the <code>msg.sender</code> of the transaction</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="wrap_eth"><code>WRAP_ETH</code><a class="hash-link" href="#wrap_eth" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the WETH</li><li><code>uint256</code> The amount of ETH to wrap</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="unwrap_weth"><code>UNWRAP_WETH</code><a class="hash-link" href="#unwrap_weth" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The recipient of the ETH</li><li><code>uint256</code> The minimum required ETH to receive from the unwrapping</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="permit2_transfer_from_batch"><code>PERMIT2_TRANSFER_FROM_BATCH</code><a class="hash-link" href="#permit2_transfer_from_batch" title="Direct link to heading">​</a></h3><ul><li><code>IAllowanceTransfer.AllowanceTransferDetails[]</code> An array of <code>AllowanceTransferDetails</code> structs that each describe a Permit2 transfer to perform</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="seaport"><code>SEAPORT</code><a class="hash-link" href="#seaport" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the Seaport contract</li><li><code>bytes</code> The calldata to use to call the Seaport contract</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="looks_rare_721"><code>LOOKS_RARE_721</code><a class="hash-link" href="#looks_rare_721" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the LooksRare contract</li><li><code>bytes</code> The calldata to use to call the LooksRare contract</li><li><code>address</code> The recipient of the ERC721</li><li><code>address</code> The ERC721 token address</li><li><code>uint256</code> The ID of the ERC721</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="nftx"><code>NFTX</code><a class="hash-link" href="#nftx" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the NFTX contract</li><li><code>bytes</code> The calldata to use to call the NFTX contract</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="cryptopunks"><code>CRYPTOPUNKS</code><a class="hash-link" href="#cryptopunks" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The PunkID to purchase</li><li><code>address</code> The recipient for the cryptopunk</li><li><code>uint256</code> The ETH value to forward to the Cryptopunks contract</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="looks_rare_1155"><code>LOOKS_RARE_1155</code><a class="hash-link" href="#looks_rare_1155" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the LooksRare contract</li><li><code>bytes</code> The calldata to use to call the LooksRare contract</li><li><code>address</code> The recipient of the ERC1155</li><li><code>address</code> The ERC1155 token address</li><li><code>uint256</code> The ID of the ERC1155</li><li><code>uint256</code> The amount of the ERC1155 to transfer</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="owner_check_721"><code>OWNER_CHECK_721</code><a class="hash-link" href="#owner_check_721" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The required owner of the ERC721</li><li><code>address</code> The ERC721 token address</li><li><code>uint256</code> The ID of the ERC721</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="owner_check_1155"><code>OWNER_CHECK_1155</code><a class="hash-link" href="#owner_check_1155" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The required owner of the ERC1155</li><li><code>address</code> The ERC721 token address</li><li><code>uint256</code> The ID of the ERC1155</li><li><code>uint256</code> The minimum required amount of the ERC1155</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="sweep_erc721"><code>SWEEP_ERC721</code><a class="hash-link" href="#sweep_erc721" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The ERC721 token address to transfer</li><li><code>address</code> The recipient of the transfer</li><li><code>uint256</code> The token ID to transfer</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="x2y2_721"><code>X2Y2_721</code><a class="hash-link" href="#x2y2_721" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the X2Y2 contract</li><li><code>bytes</code> The calldata to use to call the X2Y2 contract</li><li><code>address</code> The recipient of the ERC721</li><li><code>address</code> The ERC721 token address</li><li><code>uint256</code> The ID of the ERC721</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="sudoswap"><code>SUDOSWAP</code><a class="hash-link" href="#sudoswap" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the Sudoswap contract</li><li><code>bytes</code> The calldata to use to call the Sudoswap contract</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="nft20"><code>NFT20</code><a class="hash-link" href="#nft20" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the NFT20 contract</li><li><code>bytes</code> The calldata to use to call the NFT20 contract</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="x2y2_1155"><code>X2Y2_1155</code><a class="hash-link" href="#x2y2_1155" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the X2Y2 contract</li><li><code>bytes</code> The calldata to use to call the X2Y2 contract</li><li><code>address</code> The recipient of the ERC1155</li><li><code>address</code> The ERC1155 token address</li><li><code>uint256</code> The ID of the ERC1155</li><li><code>uint256</code> The amount of the ERC1155 to transfer</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="foundation"><code>FOUNDATION</code><a class="hash-link" href="#foundation" title="Direct link to heading">​</a></h3><ul><li><code>uint256</code> The ETH value to forward to the Foundation contract</li><li><code>bytes</code> The calldata to use to call the Foundation contract</li><li><code>address</code> The recipient of the ERC721</li><li><code>address</code> The ERC721 token address</li><li><code>uint256</code> The ID of the ERC721</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="sweep_erc1155"><code>SWEEP_ERC1155</code><a class="hash-link" href="#sweep_erc1155" title="Direct link to heading">​</a></h3><ul><li><code>address</code> The ERC1155 token address to sweep</li><li><code>address</code> The recipient of the sweep</li><li><code>uint256</code> The token ID to sweep</li><li><code>uint256</code> The minimum required tokens to receive from the sweep</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="example-reverting-commands">Example: Reverting Commands<a class="hash-link" href="#example-reverting-commands" title="Direct link to heading">​</a></h2><p>For a Sudoswap command, that should be <em>allowed to revert</em>, the following 8 bit command should be provided:</p><div class="codeBlockContainer_I0IT language-markdown theme-code-block"><div class="codeBlockContent_wNvx markdown"><pre tabindex="0" class="prism-code language-markdown codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">command = 0x80 (10000000) &amp;&amp; 0x19 (00011001) = 0x99 (10011001)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Take care when working with reverting commands - ensure you have appended commands to deal with funds that could remain in the contract after either outcomes. For example, if the Sudoswap command reverts, a following <code>SWEEP</code> can be added to ensure that any ETH that was not spent does not get left in the router.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/uniswap/uniswap-docs/tree/main/docs/universal-router-legacy/02-technical-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/universal-router-legacy/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a></li><li><a href="#command-structure" class="table-of-contents__link toc-highlight">Command Structure</a><ul><li><a href="#f" class="table-of-contents__link toc-highlight"><code>f</code></a></li><li><a href="#r" class="table-of-contents__link toc-highlight"><code>r</code></a></li><li><a href="#command" class="table-of-contents__link toc-highlight"><code>command</code></a></li></ul></li><li><a href="#command-inputs" class="table-of-contents__link toc-highlight">Command Inputs</a><ul><li><a href="#v3_swap_exact_in" class="table-of-contents__link toc-highlight"><code>V3_SWAP_EXACT_IN</code></a></li><li><a href="#v3_swap_exact_out" class="table-of-contents__link toc-highlight"><code>V3_SWAP_EXACT_OUT</code></a></li><li><a href="#permit2_transfer_from" class="table-of-contents__link toc-highlight"><code>PERMIT2_TRANSFER_FROM</code></a></li><li><a href="#permit2_permit_batch" class="table-of-contents__link toc-highlight"><code>PERMIT2_PERMIT_BATCH</code></a></li><li><a href="#sweep" class="table-of-contents__link toc-highlight"><code>SWEEP</code></a></li><li><a href="#transfer" class="table-of-contents__link toc-highlight"><code>TRANSFER</code></a></li><li><a href="#pay_portion" class="table-of-contents__link toc-highlight"><code>PAY_PORTION</code></a></li><li><a href="#v2_swap_exact_in" class="table-of-contents__link toc-highlight"><code>V2_SWAP_EXACT_IN</code></a></li><li><a href="#v2_swap_exact_out" class="table-of-contents__link toc-highlight"><code>V2_SWAP_EXACT_OUT</code></a></li><li><a href="#permit2_permit" class="table-of-contents__link toc-highlight"><code>PERMIT2_PERMIT</code></a></li><li><a href="#wrap_eth" class="table-of-contents__link toc-highlight"><code>WRAP_ETH</code></a></li><li><a href="#unwrap_weth" class="table-of-contents__link toc-highlight"><code>UNWRAP_WETH</code></a></li><li><a href="#permit2_transfer_from_batch" class="table-of-contents__link toc-highlight"><code>PERMIT2_TRANSFER_FROM_BATCH</code></a></li><li><a href="#seaport" class="table-of-contents__link toc-highlight"><code>SEAPORT</code></a></li><li><a href="#looks_rare_721" class="table-of-contents__link toc-highlight"><code>LOOKS_RARE_721</code></a></li><li><a href="#nftx" class="table-of-contents__link toc-highlight"><code>NFTX</code></a></li><li><a href="#cryptopunks" class="table-of-contents__link toc-highlight"><code>CRYPTOPUNKS</code></a></li><li><a href="#looks_rare_1155" class="table-of-contents__link toc-highlight"><code>LOOKS_RARE_1155</code></a></li><li><a href="#owner_check_721" class="table-of-contents__link toc-highlight"><code>OWNER_CHECK_721</code></a></li><li><a href="#owner_check_1155" class="table-of-contents__link toc-highlight"><code>OWNER_CHECK_1155</code></a></li><li><a href="#sweep_erc721" class="table-of-contents__link toc-highlight"><code>SWEEP_ERC721</code></a></li><li><a href="#x2y2_721" class="table-of-contents__link toc-highlight"><code>X2Y2_721</code></a></li><li><a href="#sudoswap" class="table-of-contents__link toc-highlight"><code>SUDOSWAP</code></a></li><li><a href="#nft20" class="table-of-contents__link toc-highlight"><code>NFT20</code></a></li><li><a href="#x2y2_1155" class="table-of-contents__link toc-highlight"><code>X2Y2_1155</code></a></li><li><a href="#foundation" class="table-of-contents__link toc-highlight"><code>FOUNDATION</code></a></li><li><a href="#sweep_erc1155" class="table-of-contents__link toc-highlight"><code>SWEEP_ERC1155</code></a></li></ul></li><li><a href="#example-reverting-commands" class="table-of-contents__link toc-highlight">Example: Reverting Commands</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/sherry" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Dev Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://forms.gle/13XtjmkwdXQ2jMn26" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Feedback<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://sherry.social/bug-bounty" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bug Bounty<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://sherry.social/whitepaper.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sherrylabs/core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>sherry-core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/sherrylabs/sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>sherry-sdk<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/sherrylabs/periphery" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>sherry-periphery<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contracts/v4/deployments">Deployment addresses</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items"><li class="footer__item"><a href="https://app.sherry.social/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://analytics.sherry.social/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Analytics<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tokenlists.sherry.social/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Token Lists<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/sherrylabs/brand-assets" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Brand Assets<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.sherry.social/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gov.sherry.social/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Governance<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/sherrylabs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sherry Labs Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://x.com/sherryfnd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sherry Foundation Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.d2031de2.js"></script>
<script src="/docs/assets/js/main.f68b392a.js"></script>
</body>
</html>