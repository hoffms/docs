"use strict";(self.webpackChunk_uniswap_docs=self.webpackChunk_uniswap_docs||[]).push([[96442],{45703:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>p});var a=n(83117),i=(n(67294),n(3905));const r={id:"switch-chains",title:"Switching Chains"},o=void 0,c={unversionedId:"sdk/web3-react/guides/switch-chains",id:"sdk/web3-react/guides/switch-chains",title:"Switching Chains",description:"Introduction",source:"@site/docs/sdk/web3-react/guides/03-switch-chains.md",sourceDirName:"sdk/web3-react/guides",slug:"/sdk/web3-react/guides/switch-chains",permalink:"/docs/sdk/web3-react/guides/switch-chains",editUrl:"https://github.com/uniswap/uniswap-docs/tree/main/docs/sdk/web3-react/guides/03-switch-chains.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"switch-chains",title:"Switching Chains"},sidebar:"sdkSidebar",previous:{title:"Supported Connectors",permalink:"/docs/sdk/web3-react/guides/connectors"},next:{title:"Overview",permalink:"/docs/sdk/core/overview"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Switching Chains",id:"switching-chains",level:2},{value:"Next steps",id:"next-steps",level:2}],l={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"This guide will cover how to prompt a wallet that has connected to our dApp to switch chains using ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react"),". It is based on the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Uniswap/examples/tree/main/web3-react"},(0,i.kt)("inlineCode",{parentName:"a"},"web3-react")," example"),", found in the Uniswap code examples ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Uniswap/examples"},"repository"),". To run this example, check out the examples's ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Uniswap/examples/blob/main/web3-react/README.md"},"README")," and follow the setup instructions."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For help on setting up ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react")," and interacting with a MetaMask wallet, please visit our ",(0,i.kt)("a",{parentName:"p",href:"/docs/sdk/web3-react/guides/connect-wallet"},"connecting to wallets")," page!"))),(0,i.kt)("p",null,"The input parameters to this guide are the chains that we want our dApp to be able to connect to and their RPC URLs."),(0,i.kt)("p",null,"At the end of the guide, we should be able to switch chains on the connected wallet."),(0,i.kt)("p",null,"For this guide, the following ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react")," packages are used:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@web3-react/core"},(0,i.kt)("inlineCode",{parentName:"a"},"@web3-react/core")))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This guide uses ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react")," version 8, which is a beta version."))),(0,i.kt)("p",null,"The core code of this guide can be found in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Uniswap/examples/blob/feat/web3-react/web3-react/src/libs/connections.ts"},"connections"),"."),(0,i.kt)("h2",{id:"switching-chains"},"Switching Chains"),(0,i.kt)("p",null,"Having ",(0,i.kt)("a",{parentName:"p",href:"/docs/sdk/web3-react/guides/connect-wallet"},"setup our application")," to use ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react")," and having built out the ability to ",(0,i.kt)("a",{parentName:"p",href:"/docs/sdk/web3-react/guides/connectors"},"connect and disconnect wallets"),", we can now move on to switching chains."),(0,i.kt)("p",null,"Switching chains requires two parameters, the ",(0,i.kt)("inlineCode",{parentName:"p"},"chainId")," we want to switch to, and the current ",(0,i.kt)("inlineCode",{parentName:"p"},"connectionType"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'reference title="Defining the function" referenceLinkText="View on GitHub" customStyling',reference:!0,title:'"Defining',the:!0,'function"':!0,referenceLinkText:'"View',on:!0,'GitHub"':!0,customStyling:!0},"https://github.com/Uniswap/examples/blob/8c0e36ca8d2ba4718af944094191f39da62a9c5c/web3-react/src/libs/connections.ts#L64\n")),(0,i.kt)("p",null,"Given the ",(0,i.kt)("inlineCode",{parentName:"p"},"ConnectionType"),", we can retrieve the actual connector:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'reference title="Retrieving the connector" referenceLinkText="View on GitHub" customStyling',reference:!0,title:'"Retrieving',the:!0,'connector"':!0,referenceLinkText:'"View',on:!0,'GitHub"':!0,customStyling:!0},"https://github.com/Uniswap/examples/blob/8c0e36ca8d2ba4718af944094191f39da62a9c5c/web3-react/src/libs/connections.ts#L69\n")),(0,i.kt)("p",null,"Then, depending on the ",(0,i.kt)("inlineCode",{parentName:"p"},"ConnectionType"),", we determine how to switch chains. For the ",(0,i.kt)("inlineCode",{parentName:"p"},"Network")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"WalletConnect")," cases, we call ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"activate")," function with the supplied ",(0,i.kt)("inlineCode",{parentName:"p"},"chainId"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'reference title="Switching chains for Network and WalletConnect" referenceLinkText="View on GitHub" customStyling',reference:!0,title:'"Switching',chains:!0,for:!0,Network:!0,and:!0,'WalletConnect"':!0,referenceLinkText:'"View',on:!0,'GitHub"':!0,customStyling:!0},"https://github.com/Uniswap/examples/blob/8c0e36ca8d2ba4718af944094191f39da62a9c5c/web3-react/src/libs/connections.ts#L71-L74\n")),(0,i.kt)("p",null,"The rest of the connectors require us to build an ",(0,i.kt)("inlineCode",{parentName:"p"},"AddEthereumChainParameter")," object and pass it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"activate")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'reference title="Switching chains the other Connectors" referenceLinkText="View on GitHub" customStyling',reference:!0,title:'"Switching',chains:!0,the:!0,other:!0,'Connectors"':!0,referenceLinkText:'"View',on:!0,'GitHub"':!0,customStyling:!0},"https://github.com/Uniswap/examples/blob/8c0e36ca8d2ba4718af944094191f39da62a9c5c/web3-react/src/libs/connections.ts#L77-L84\n")),(0,i.kt)("p",null,"The metadata required to build ",(0,i.kt)("inlineCode",{parentName:"p"},"AddEthereumChainParameter"),"  are defined in our constants file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'reference title="Defining the chain parameters" referenceLinkText="View on GitHub" customStyling',reference:!0,title:'"Defining',the:!0,chain:!0,'parameters"':!0,referenceLinkText:'"View',on:!0,'GitHub"':!0,customStyling:!0},"https://github.com/Uniswap/examples/blob/8c0e36ca8d2ba4718af944094191f39da62a9c5c/web3-react/src/libs/constants.ts#L27-L40\n")),(0,i.kt)("h2",{id:"next-steps"},"Next steps"),(0,i.kt)("p",null,"Know you know how to support ",(0,i.kt)("inlineCode",{parentName:"p"},"web3-react"),"'s most common use cases! Stay tuned for follow up guides."))}d.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),h=i,m=u["".concat(s,".").concat(h)]||u[h]||d[h]||r;return n?a.createElement(m,o(o({ref:t},l),{},{components:n})):a.createElement(m,o({ref:t},l))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);