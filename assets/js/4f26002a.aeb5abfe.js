"use strict";(self.webpackChunk_uniswap_docs=self.webpackChunk_uniswap_docs||[]).push([[52645],{14090:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(83117),o=(n(67294),n(3905));const i={id:"becomequoter",title:"Become a Quoter",sidebar_position:2},a="Quoting on UniswapX",s={unversionedId:"contracts/uniswapx/guides/mainnet/becomequoter",id:"contracts/uniswapx/guides/mainnet/becomequoter",title:"Become a Quoter",description:"This guide provides step-by-step instructions for integrating as a Quoter on UniswapX. It is intended for experienced defi teams that have experience running similar systems on other protocols.",source:"@site/docs/contracts/uniswapx/guides/mainnet/becomeQuoter.md",sourceDirName:"contracts/uniswapx/guides/mainnet",slug:"/contracts/uniswapx/guides/mainnet/becomequoter",permalink:"/docs/contracts/uniswapx/guides/mainnet/becomequoter",editUrl:"https://github.com/uniswap/uniswap-docs/tree/main/docs/contracts/uniswapx/guides/mainnet/becomeQuoter.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"becomequoter",title:"Become a Quoter",sidebar_position:2},sidebar:"contractsSidebar",previous:{title:"Filling on Mainnet",permalink:"/docs/contracts/uniswapx/guides/mainnet/createfiller"},next:{title:"Filling on Arbitrum",permalink:"/docs/contracts/uniswapx/guides/arbitrum/arbitrumfiller"}},u={},l=[{value:"Performance Expectations",id:"performance-expectations",level:2},{value:"Handling Fades &amp; the Circuit Breaker",id:"handling-fades--the-circuit-breaker",level:2},{value:"Request Schema:",id:"request-schema",level:2},{value:"Response Schema:",id:"response-schema",level:2},{value:"Schema When Disabled Due to Circuit Breaker",id:"schema-when-disabled-due-to-circuit-breaker",level:2},{value:"Steps to Move to Production",id:"steps-to-move-to-production",level:2}],c={toc:l};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"quoting-on-uniswapx"},"Quoting on UniswapX"),(0,o.kt)("p",null,"This guide provides step-by-step instructions for integrating as a Quoter on UniswapX. It is intended for experienced defi teams that have experience running similar systems on other protocols."),(0,o.kt)("p",null,"To ensure a smooth swapping experience for traders, the set of Quoters will be vetted by Uniswap Labs following UniswapX\u2019s launch. There are plans to make the quoting system fully permissionless in the near future."),(0,o.kt)("p",null,"Once you've been approved to be a quoter by the Uniswap Labs team, follow the instructions below to complete your integration. If you have not been approved, please join the waitlist by filling out our ",(0,o.kt)("a",{parentName:"p",href:"https://uniswap.typeform.com/to/UiPDKgY6"},"intake form"),"."),(0,o.kt)("h1",{id:"getting-started-as-a-quoter"},"Getting Started as a Quoter"),(0,o.kt)("p",null,"To participate as a quoter, you must host a service that adheres to the UniswapX RFQ API schema and responds to requests with quotes. The RFQ participant who submits the best quote for a given order will receive exclusive rights to fill it using their Executor during the ",(0,o.kt)("em",{parentName:"p"},"Exclusivity Period")," of the auction."),(0,o.kt)("h2",{id:"performance-expectations"},"Performance Expectations"),(0,o.kt)("p",null,"To ensure a smooth experience for swappers and a fair auction process for quoters, we will hold participants to the following performance standards:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("em",{parentName:"strong"},"500ms Response Time:"))," Your server must respond to a request for a quote within ",(0,o.kt)("strong",{parentName:"li"},"500ms"),". If you cannot provide a quote, respond with a 204 status code.")),(0,o.kt)("p",null,"Consistent failure to meet this standard may result in suspension from the system."),(0,o.kt)("h2",{id:"handling-fades--the-circuit-breaker"},"Handling Fades & the Circuit Breaker"),(0,o.kt)("p",null,'Quoters are expected to honor and execute the quotes they submit. If a quoter submits a winning quote but fails to fill the subsequent order, the "circuit breaker" will be triggered, temporarily disabling the quoter from receiving new requests.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("em",{parentName:"strong"},"Cooldown Time:"))," The cooldown period starts at 15 minutes for the first fade and increases exponentially for consecutive fades. More details on the cooldown calculation can be found in the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/Uniswap/uniswapx-parameterization-api/blob/bf87dcc0066fa21b72255f7155f5fbd04a518594/lib/cron/fade-rate-v2.ts#L215"},"source code"),". ")),(0,o.kt)("h1",{id:"rfq-api-integration-details"},"RFQ API Integration Details"),(0,o.kt)("p",null,"To successfully receive and respond to UniswapX RFQ Quotes, you must have a publicly accessible endpoint that handles incoming quote requests according to the following schema:"),(0,o.kt)("h2",{id:"request-schema"},"Request Schema:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'method: POST\ncontent-type: application/json\ndata: {\n    requestId: "string uuid - a unique identifier for swapper\'s request",\n    tokenInChainId: "number - the `tokenIn` chainId",\n    tokenOutChainId: "number - the `tokenOut` chainId",\n    swapper: "string address - The swapper\u2019s EOA address that will sign the order",\n    tokenIn: "string address - The ERC20 token that the swapper will provide",\n    tokenOut: "string address - The ERC20 token that the swapper will receive",\n    amount: "string number - If the trade type is exact input then this is amount of `tokenIn` the user wants to swap otherwise this is amount of tokenOut the user wants to receive",\n    type: "number - This is either `EXACT_INPUT` or `EXACT_OUTPUT`",\n    quoteId: "string uuid - a unique identifier for the quote an integrator is sending back"\n}\n')),(0,o.kt)("h2",{id:"response-schema"},"Response Schema:"),(0,o.kt)("p",null,"If you can fulfill the quote request, your server should respond with (status 200 - OK) and the following data:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'{\n    chainId: "number - the chainId for the quoted token",\n    amountIn: "string number - If the request type is exact input then this field is `amount` from the quote request, otherwise this is the provided quote",\n    amountOut: "string number - If the request type is exact output then this field is `amount` from the quote request, otherwise this is the provided quote",\n    filler: "string address - The executor address that you would like to have last-look exclusivity for this order"\n\n    { ...The following fields should be echoed from the quote request...},\n    requestId: "string uuid - a unique identifier for this quote request",\n    swapper: "string address - The swapper\u2019s EOA address that will sign the order",\n    tokenIn: "string address - The ERC20 token that the swapper will provide",\n    tokenOut: "string address - The ERC20 token that the swapper will receive",\n    quoteId: "string uuid - a unique identifier for the quote an integrator is sending back"\n}\n')),(0,o.kt)("p",null,"If you do not wish to respond to a quote request, you must return an empty response with status code\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"204"),"."),(0,o.kt)("h2",{id:"schema-when-disabled-due-to-circuit-breaker"},"Schema When Disabled Due to Circuit Breaker"),(0,o.kt)("p",null,"If you are an onboarded quoter who is currently disabled by the circuit breaker, your server will receive the following message on the same quote endpoint:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'method: POST\ncontent-type: application/json\ndata: {\n    blockUntilTimestamp: "timestamp - the timestamp that this quoter is disabled until"\n}\n')),(0,o.kt)("h1",{id:"moving-to-production"},"Moving to Production"),(0,o.kt)("p",null,"All new quoter instances will start by being onboarded to our ",(0,o.kt)("a",{parentName:"p",href:"https://beta.api.uniswap.org/v2/uniswapx/docs"},"Beta environment"),". Here, they will need to demonstrate at least ",(0,o.kt)("strong",{parentName:"p"},"5 valid Exclusive RFQ fills")," to be moved to production. The Beta environment serves valid mainnet orders that should be filled against production contracts but does not receive traffic from production interfaces."),(0,o.kt)("h2",{id:"steps-to-move-to-production"},"Steps to Move to Production"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Provide their quote server URL")," to your Uniswap Labs contact along with the contract address you\u2019re using to fill. We recommend that this be the same quoting infrastructure that you plan to run in production. "),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"(Optional) Provide notification webhook URL")," to you Uniswap Labs contact. We\u2019ll set up notifications of won orders to be served there. Alternatively, you can poll the ",(0,o.kt)("a",{parentName:"li",href:"https://beta.api.uniswap.org/v2/uniswapx/docs"},"Beta /orders Endpoint")," for won orders. "),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Begin sending quotes and orders to beta")," via the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/Uniswap/uniswapx-tool?tab=readme-ov-file#simple-order-creation"},"UniswapX CLI"),". Reach out to the Uniswap team to be added to the private github."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Send hashes of 5 filled transactions")," that demonstrate that the integration was able to fill during the exclusive period; specifically before ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/Uniswap/UniswapX/blob/abd7a0b080148fc42ef7c86536d14de714eec4c7/src/lib/ExclusiveDutchOrderLib.sol#L12"},"decayStartTime"))),(0,o.kt)("p",null,"The Uniswap Labs team will review the 5 transactions to confirm they were successful exclusive fills. Once they are confirmed, the quoters setup will be promoted to production and will start receiving traffic."))}p.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(n),h=o,m=d["".concat(u,".").concat(h)]||d[h]||p[h]||i;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);